{# templates/html/company_finances/rental_properties.html #}
{% extends 'html/includes/base.html' %}

{% block title %}Rental Properties - Project Zeus Monies{% endblock %}

{% block content %}
    <div class="container" id="rental-properties-container">
        <h1 class="page-title" id="rental-properties-page-title">Rental Properties</h1>
        <p class="page-description">
            Manage and track basic information for all your rental properties.
            Each property has a unique ID, and you can add, edit, or delete entries.
        </p>

        {# Message box for success/error messages from JavaScript #}
        <div id="message-box" class="message-box" style="display: none;"></div>

        <!-- Data Input Section (Form) -->
        <section class="data-input-section">
            <h2 class="section-title" id="form-section-title">Add New Property</h2>
            <form id="add-property-form" class="property-form">
                <input type="hidden" id="property-db-id" name="id"> {# HIDDEN FIELD FOR DATABASE ID #}
                <div class="form-grid">
                    <div class="form-group">
                        <label for="property-id">Property ID:</label>
                        <input type="text" id="property-id" name="property_id" required>
                    </div>
                    <div class="form-group">
                        <label for="property-name">Property Name:</label>
                        <input type="text" id="property-name" name="property_name" required>
                    </div>
                    <div class="form-group full-width">
                        <label for="address">Address:</label>
                        <input type="text" id="address" name="address" required>
                    </div>
                    <div class="form-group">
                        <label for="city">City:</label>
                        <input type="text" id="city" name="city" required>
                    </div>
                    <div class="form-group">
                        <label for="state">State:</label>
                        <input type="text" id="state" name="state" required>
                    </div>
                    <div class="form-group">
                        <label for="county">County:</label>
                        <input type="text" id="county" name="county">
                    </div>
                    <div class="form-group">
                        <label for="built-year">Built Year:</label>
                        <input type="number" id="built-year" name="built_year" min="1000" max="9999" required>
                    </div>
                    <div class="form-group">
                        <label for="purchase-date">Purchase Date:</label>
                        <input type="date" id="purchase-date" name="purchase_date" required>
                    </div>
                    <div class="form-group">
                        <label for="ownership-association">Ownership Association:</label>
                        <select id="ownership-association" name="ownership_association" required>
                            <option value="">Select One</option>
                            <option value="Self">Self</option>
                            <option value="JDL Global">JDL Global</option>
                            <option value="JDL Texas">JDL Texas</option>
                            <option value="JDL Virginia">JDL Virginia</option>
                            <option value="JDL Office">JDL Office</option>
                            <option value="THM UG">THM UG</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="purchase-price">Purchase Price:</label>
                        <input type="number" id="purchase-price" name="purchase_price" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="down-payment">Down Payment:</label>
                        <input type="number" id="down-payment" name="down_payment" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="interest-rate">Interest Rate (%):</label>
                        <input type="number" id="interest-rate" name="interest_rate" step="0.001" min="0" max="100" required>
                    </div>
                    <div class="form-group">
                        <label for="mortgage-broker-name">Mortgage Broker's Name:</label>
                        <input type="text" id="mortgage-broker-name" name="mortgage_broker_name">
                    </div>
                    <div class="form-group">
                        <label for="maturity-date">Maturity Date:</label>
                        <input type="date" id="maturity-date" name="maturity_date">
                    </div>
                    <div class="form-group">
                        <label for="loan-number">Loan Number:</label>
                        <input type="text" id="loan-number" name="loan_number">
                    </div>
                    <div class="form-group">
                        <label for="document-upload">Document Upload:</label>
                        <input type="file" id="document-upload" name="document_upload">
                    </div>
                </div>
                <div class="form-actions"> {# NEW CONTAINER FOR BUTTONS #}
                    <button type="submit" class="btn btn-save" id="submit-property-button">Add Property</button>
                    <button type="button" class="btn btn-cancel hidden" id="cancel-edit-button">Cancel</button> {# NEW CANCEL BUTTON #}
                </div>
            </form>
        </section>

        <!-- Property List Area -->
        <section class="property-list-section">
            <h2 class="section-title">Property List</h2>
            <div class="list-controls">
                <label for="sort-by">Sort by:</label>
                <select id="sort-by">
                    <option value="property_id">Property ID</option>
                    <option value="property_name">Property Name</option>
                    <option value="ownership_association">Ownership Association</option>
                    <option value="purchase_price">Purchase Price</option>
                    <option value="purchase_date">Purchase Date</option>
                </select>
            </div>
            <table class="data-table" id="property-list-table">
                <thead>
                    <tr>
                        <th class="rounded-tl-lg">Property ID</th>
                        <th>Property Name</th>
                        <th>Ownership Association</th>
                        <th>Purchase Price</th>
                        <th class="rounded-tr-lg">Documents</th>
                        <th>Actions</th> {# For Edit/Delete buttons #}
                    </tr>
                </thead>
                <tbody id="property-list-body">
                    <!-- Properties will be dynamically loaded here -->
                </tbody>
            </table>
        </section>
    </div>
{% endblock %}

{% block scripts %}
    {# Link to page-specific JavaScript #}
    <script src="{{ url_for('static', filename='js/rental_properties.js') }}" defer></script>
    {# Link to page-specific CSS #}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/rental_properties.css') }}">
{% endblock %}
